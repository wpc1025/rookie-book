# diff命令(2019.06.16)

用来比较两个文本文件的差异

## 一、命令格式

`diff [参数] [文件1或目录1] [文件2或目录2]`

## 二、命令参数

| 参数 | 作用 |
| :--- | :--- |
| -b | 不检查空格字符的不同 |
| -B | 不检查空白行 |
| -c | 显示全部内文，并标出不同之处 | 
| -i | 不检查大小写的不同 |
| -q | 仅显示有无差异，不显示详细的信息 |
| -r | 比较子目录中的文件 |
| -u | 以合并的方式显示文件内容的不同 |
| -w | 忽略全部的空格字符 |


## 三、diff的三种格式

两个文件：a、b，a文件七行a，b文件复制a文件，第四行变成b

### 3.1 正常格式

    [rookie@iZbp18hovh1qxijbodbas9Z ~]$ diff a b
    4c4
    < a
    ---
    > b
    [rookie@iZbp18hovh1qxijbodbas9Z ~]$ 

- 第一行是一个提示，用来说明变动位置
- 分为三个部分
    - 前面的"4"，表示a文件的第四行有变动
    - 中间的"c"表示变动的模式是内容改变（change），其他模式还有增加（a，代表addition）和删除（d，代表deletion）
    - 后面的"4"表示变动后变成b文件的第4行
- 第二行分为两个部分
    - 前面的小于号，表示从a文件中去除该行，后面的"a"表示该行的内容
- 第三行用来分割a文件和b文件
- 第四行，类似第二行

### 3.2 上下文格式

    [rookie@iZbp18hovh1qxijbodbas9Z ~]$ diff -c a b
    *** a	2019-06-16 22:00:50.478149612 +0800
    --- b	2019-06-16 22:11:02.690179712 +0800
    ***************
    *** 1,8 ****
      a
      a
      a
      a
    ! a
    ! a
      a
      
    --- 1,8 ----
      a
      a
      a
    + b
      a
    ! b
      a
      
    [rookie@iZbp18hovh1qxijbodbas9Z ~]$ 
    
使用`-c`选项代表上下文显示文件差异

结果分为四个部分：
- 第一部分的两行，显示两个文件的基本信息：文件名和时间信息
- 第二部分是15个星号，将文件的基本内容和变动内容分割开
- 第三部分显示变动前的文件，即a
- 第四部分显示变动后的文件

### 3.3 合并格式

    [rookie@iZbp18hovh1qxijbodbas9Z ~]$ diff -u a b
    --- a	2019-06-16 22:00:50.478149612 +0800
    +++ b	2019-06-16 22:11:02.690179712 +0800
    @@ -1,8 +1,8 @@
     a
     a
     a
    +b
     a
    -a
    -a
    +b
     a
     
    [rookie@iZbp18hovh1qxijbodbas9Z ~]$ 
    
- 第一部分，文件的基本信息
- 第二部分，变动的位置用两个`@`作为起首和结束
- 第三部分，是变动的具体内容

